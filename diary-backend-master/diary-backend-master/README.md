# REST API для базы данных прочитанных книг

Перед запуском убедитесь, что вы установили Node.js версии 12 или выше.

Для запуска сервера перейдите в папку с репозиторием и выполните команду `node index`. Для остановки нажмите сочетание клавиш CTRL+C.

После запуска сервера API будет доступен по пути `http://localhost:3000`.

## Методы API

Все методы API, требующие тела запроса, ожидают получить тело в виде JSON. Ответы всех методов также отдаются в виде JSON.

* `GET /api/books` получить список книг. Параметры, передаваемые в URL:
    * `search={search string}` поисковый запрос, при передаче метод вернёт книг, у которых имя, фамилия, отчество или значение одного из контактов содержат указанную подстроку
* `POST /api/books` создать новую книгу. В теле запроса нужно передать объект книги. Тело ответа успешно обработанного запроса будет содержать объект с созданной книгой.
* `GET /api/book/{id}` получить данные книги по его ID. Тело ответа успешно обработанного запроса будет содержать объект книги.
* `PATCH /api/book/{id}` перезаписать данные о книге с переданным ID. Тело ответа успешно обработанного запроса будет содержать объект с обновлённой книгой.
* `DELETE /api/book/{id}` удалить книгу с переданным ID.

## Структура объекта книги

```javascript
{
  // ID книги, заполняется сервером автоматически, после создания нельзя изменить
  id: '1',
  // дата и время создания книги, заполняется сервером автоматически, после создания нельзя изменить
  createdAt: '2021-02-03T13:07:29.554Z',
  // дата и время изменения книги, заполняется сервером автоматически при изменении книги
  updatedAt: '2021-02-03T13:07:29.554Z',
  // * обязательное поле, название книги
  title: 'Айвенго',
  // * обязательное поле, сюжет книги
  plot: 'Рыцарь...',
  // необязательное поле, отзыв о книге
  review: 'О рыцаре...',
  // каждый объект в массиве (если он передан) должен содержать непустые свойства type и value
  quotes: [
    {
      number: '1',
      value: 'Если...'
    },
    {
      number: '2',
      value: 'Per asperum'
    },
  ]
}
```

## Возможные статусы ответов

Ответ сервера может содержать один из статусов ответа:
* `200` - запрос обработан нормально
* `201` - запрос на создание нового элемента успешно обработан, а заголовок ответа Location содержит ссылку на GET метод получения созданного элемента
* `404` - переданный в запросе метод не существует или запрашиваемый элемент не найден в базе данных
* `422` - объект, переданный в теле запроса, не прошёл валидацию. Тело ответа содержит массив с описаниями ошибок валидации:
  ```javascript
  [
    {
      field: 'Название поля объекта, в котором произошла ошибка',
      message: 'Сообщение об ошибке, которое можно показать пользователю'
    }
  ]
  ```
* `500` - странно, но сервер сломался
